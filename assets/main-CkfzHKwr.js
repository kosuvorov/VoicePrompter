import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */const T="modulepreload",W=function(e){return"/"+e},x={},H=function(i,o,r){let c=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));c=Promise.allSettled(o.map(d=>{if(d=W(d),d in x)return;x[d]=!0;const p=d.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const u=document.createElement("link");if(u.rel=p?"stylesheet":T,p||(u.as="script"),u.crossOrigin="",u.href=d,l&&u.setAttribute("nonce",l),document.head.appendChild(u),p)return new Promise((g,b)=>{u.addEventListener("load",g),u.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return c.then(s=>{for(const l of s||[])l.status==="rejected"&&a(l.reason);return i().catch(a)})};function P(e={}){const{immediate:i=!1,onNeedRefresh:o,onOfflineReady:r,onRegistered:c,onRegisteredSW:a,onRegisterError:s}=e;let l,d;const p=async(u=!0)=>{await d};async function f(){if("serviceWorker"in navigator){const{Workbox:u}=await H(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:g}},[]);l=new u("/sw.js",{scope:"/",type:"classic"}),l.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),l.addEventListener("installed",g=>{g.isUpdate||r==null||r()}),l.register({immediate:i}).then(g=>{a?a("/sw.js",g):c==null||c(g)}).catch(g=>{s==null||s(g)})}}return d=f(),p}let t;function A(){t={setupScreen:document.getElementById("setupScreen"),prompterContainer:document.getElementById("prompterContainer"),inputScript:document.getElementById("inputScript"),scriptContent:document.getElementById("scriptContent"),scrollContainer:document.getElementById("scrollContainer"),topSpacer:document.getElementById("topSpacer"),settingsPanel:document.getElementById("settingsPanel"),fontSizeInput:document.getElementById("fontSizeInput"),fontSizeVal:document.getElementById("fontSizeVal"),lineHeightInput:document.getElementById("lineHeightInput"),lineHeightVal:document.getElementById("lineHeightVal"),paragraphSpacingInput:document.getElementById("paragraphSpacingInput"),paragraphSpacingVal:document.getElementById("paragraphSpacingVal"),marginInput:document.getElementById("marginInput"),marginVal:document.getElementById("marginVal"),activeLinePositionInput:document.getElementById("activeLinePositionInput"),activeLinePositionVal:document.getElementById("activeLinePositionVal"),textColorInput:document.getElementById("textColorInput"),bgColorInput:document.getElementById("bgColorInput"),appBody:document.getElementById("appBody"),micButton:document.getElementById("micButton"),micIcon:document.getElementById("micIcon"),statusIndicator:document.getElementById("statusIndicator"),mirrorToggle:document.getElementById("mirrorToggle"),browserWarning:document.getElementById("browserWarning"),dismissWarningBtn:document.getElementById("dismissWarningBtn"),historyList:document.getElementById("historyList"),historySection:document.getElementById("historySection"),stopSignToggle:document.getElementById("stopSignToggle"),alignBtns:{left:document.getElementById("alignLeftBtn"),center:document.getElementById("alignCenterBtn"),right:document.getElementById("alignRightBtn")},loadScriptBtn:document.getElementById("loadScriptBtn"),clearHistoryBtn:document.getElementById("clearHistoryBtn"),resetAppBtn:document.getElementById("resetAppBtn"),restartScriptBtn:document.getElementById("restartScriptBtn"),toggleSettingsBtn:document.getElementById("toggleSettingsBtn"),closeSettingsBtn:document.getElementById("closeSettingsBtn"),themeDarkBtn:document.getElementById("themeDarkBtn"),themeLightBtn:document.getElementById("themeLightBtn"),copyScriptBtn:document.getElementById("copyScriptBtn"),clearScriptBtn:document.getElementById("clearScriptBtn"),pasteScriptBtn:document.getElementById("pasteScriptBtn"),languageSelect:document.getElementById("languageSelect"),preserveFormattingToggle:document.getElementById("preserveFormattingToggle"),voiceCommandToggle:document.getElementById("voiceCommandToggle"),screenRotationToggle:document.getElementById("screenRotationToggle"),smoothAnimationsToggle:document.getElementById("smoothAnimationsToggle")}}const n={scriptWords:[],currentIndex:0,recognition:null,isListening:!1,isMirrored:!1,isScreenRotated:!1,selectedLanguage:"en-US",config:{fontSize:40,lineHeight:1,margin:0,textColor:"#ffffff",bgColor:"#000000",textAlign:"left",showStopIcon:!1,preserveFormatting:!0,voiceCommandsEnabled:!0,paragraphSpacing:.5,smoothAnimations:!0,activeLinePosition:35}};function V(){t.scriptContent.innerHTML="",n.scriptWords.forEach((e,i)=>{const o=document.createElement("span");o.textContent=e.word,o.id=`word-${i}`;let r="script-word transition-opacity duration-300 ";e.isStop?r+="stop-marker ":e.isBreak?(r+="line-break ",o.style.display="block",o.style.width="100%"):e.skip?r+="skipped-word ":r+="text-future hover:text-blue-400 ",o.className=r,o.onclick=()=>{e.skip||(n.currentIndex=i,h(),v())},t.scriptContent.appendChild(o),e.element=o}),n.config.showStopIcon?t.scriptContent.classList.add("show-stops"):t.scriptContent.classList.remove("show-stops"),t.setupScreen.classList.add("hidden"),t.prompterContainer.classList.remove("hidden"),n.currentIndex=0,S(),h()}function h(){n.scriptWords.forEach((e,i)=>{e.skip||(i<n.currentIndex?e.element&&(e.element.classList.remove("current-word","text-future"),e.element.classList.add("text-neutral-500")):i===n.currentIndex?e.element&&(e.element.classList.remove("text-neutral-500","text-future"),e.element.classList.add("current-word")):e.element&&(e.element.classList.remove("current-word","text-neutral-500"),e.element.classList.add("text-future")))})}function v(){if(n.currentIndex<n.scriptWords.length){const e=n.scriptWords[n.currentIndex];if(e&&e.element){const i=t.scrollContainer.clientHeight,o=n.config.activeLinePosition/100,r=e.element.offsetTop-i*o;n.config.smoothAnimations?$(t.scrollContainer,r,600):t.scrollContainer.scrollTo({top:r,behavior:"auto"})}}}function $(e,i,o){const r=e.scrollTop,c=i-r,a=performance.now();function s(l){const d=l-a,p=Math.min(d/o,1),f=p<.5?2*p*p:1-Math.pow(-2*p+2,2)/2;e.scrollTop=r+c*f,d<o&&requestAnimationFrame(s)}requestAnimationFrame(s)}function S(){for(;n.currentIndex<n.scriptWords.length&&n.scriptWords[n.currentIndex].skip;)n.currentIndex++}function C(){n.currentIndex=0,S(),h(),v(),t.scrollContainer.scrollTop=0}function m(){t.appBody.style.backgroundColor=n.config.bgColor,t.appBody.style.color=n.config.textColor,t.appBody.style.setProperty("--base-color",n.config.textColor),t.scriptContent.style.setProperty("--paragraph-spacing",`${n.config.paragraphSpacing}em`),t.scriptContent.style.textAlign=n.config.textAlign,n.config.smoothAnimations?t.scriptContent.classList.add("smooth-animations"):t.scriptContent.classList.remove("smooth-animations")}function y(e){e?(t.micButton.classList.remove("bg-neutral-800","hover:bg-neutral-700"),t.micButton.classList.add("bg-red-600","hover:bg-red-700","animate-pulse"),t.micIcon.classList.add("text-white"),t.statusIndicator.textContent="Listening...",t.statusIndicator.classList.remove("text-neutral-500"),t.statusIndicator.classList.add("text-red-500")):(t.micButton.classList.add("bg-neutral-800","hover:bg-neutral-700"),t.micButton.classList.remove("bg-red-600","hover:bg-red-700","animate-pulse"),t.micIcon.classList.remove("text-white"),t.statusIndicator.textContent="Tap mic to start",t.statusIndicator.classList.add("text-neutral-500"),t.statusIndicator.classList.remove("text-red-500"))}function B(e,i){if(t.historyList.innerHTML="",e.length===0){t.historyList.innerHTML=`
            <div class="text-center py-8 border border-dashed border-neutral-800 rounded-lg text-neutral-600 text-sm">
                No previous scripts found
            </div>
        `,t.clearHistoryBtn.classList.add("hidden");return}t.clearHistoryBtn.classList.remove("hidden"),e.forEach(o=>{const r=document.createElement("div");r.className="bg-neutral-800 p-3 rounded border border-neutral-700 hover:border-blue-500 cursor-pointer transition group flex justify-between items-center shadow-sm min-w-[85%] md:min-w-0 snap-center",r.onclick=()=>{t.inputScript.value=o.text,i(o.text)},r.innerHTML=`
            <div class="flex flex-col text-left overflow-hidden mr-2">
                <span class="text-gray-300 text-sm font-medium truncate font-mono">${o.preview}</span>
                <span class="text-gray-500 text-xs">${o.date}</span>
            </div>
            <div class="flex-shrink-0">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-500 opacity-0 group-hover:opacity-100 transition" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
            </div>
        `,t.historyList.appendChild(r)})}function F(){const e=window.SpeechRecognition||window.webkitSpeechRecognition;e?(n.recognition=new e,n.recognition.continuous=!0,n.recognition.interimResults=!0,n.recognition.lang=n.selectedLanguage,n.recognition.onresult=i=>{let o="";for(let a=i.resultIndex;a<i.results.length;a++)o+=i.results[a][0].transcript;const r=o.trim().toLowerCase().split(/\s+/),c=r.slice(-5).join(" ");if(n.config.voiceCommandsEnabled&&c.includes("prompter restart")){C();return}z(r.slice(-5))},n.recognition.onend=()=>{if(n.isListening)try{n.recognition.start()}catch(i){console.error("Failed to restart speech recognition:",i)}else y(!1)}):t.browserWarning.classList.remove("hidden")}function R(){if(n.recognition){n.isListening=!0;try{n.recognition.start(),y(!0)}catch(e){console.error("Failed to start speech recognition:",e),n.isListening=!1,y(!1)}}}function w(){if(n.recognition){n.isListening=!1;try{n.recognition.stop(),y(!1)}catch(e){console.error("Failed to stop speech recognition:",e)}}}function z(e){if(n.currentIndex>=n.scriptWords.length)return;const i=5;for(let o of e){const r=o.replace(/[^\p{L}\p{N}]/gu,"");if(!r)continue;let c=n.currentIndex,a=0;for(;c<n.scriptWords.length&&a<i;){const s=n.scriptWords[c];if(s.skip){c++;continue}if(s.clean===r){n.currentIndex=c+1,S(),h(),v();return}c++,a++}}}const E="teleprompter_history";function I(){return JSON.parse(localStorage.getItem(E)||"[]")}function _(e){let i=I();if(i.length>0&&i[0].text===e)return;const o={id:Date.now(),text:e,preview:e.substring(0,40)+(e.length>40?"...":""),date:new Date().toLocaleDateString()};i.unshift(o),i.length>10&&i.pop(),localStorage.setItem(E,JSON.stringify(i))}function D(){localStorage.removeItem(E)}P({immediate:!0});A();F();function L(e){if(!e)return;const i=e.trim();if(!i)return;_(i);const o=t.languageSelect.value;n.selectedLanguage=o,n.recognition&&(n.recognition.lang=o);let r=i;n.config.preserveFormatting?r=r.replace(/\n/g," ||BR|| "):r=r.replace(/\n+/g," ||LB|| ");const c=r.split(/\s+/);let a=!1;n.scriptWords=c.map(s=>{if(s==="||LB||")return{word:"ðŸ›‘",clean:"",element:null,skip:!0,isStop:!0};if(s==="||BR||")return{word:"",clean:"",element:null,skip:!0,isBreak:!0,isStop:!1};s.startsWith("[")&&(a=!0);const l=a||/[\u{1F300}-\u{1F9FF}]/u.test(s);s.endsWith("]")&&(a=!1);const d=s.replace(/[^\p{L}\p{N}]/gu,"").toLowerCase();return{word:s,clean:d,element:null,skip:l,isStop:!1}}),V(),m()}function M(){w(),t.prompterContainer.classList.add("hidden"),t.setupScreen.classList.remove("hidden"),B(I(),L)}function O(){confirm("Clear all recent scripts?")&&(D(),B(I(),L))}t.loadScriptBtn.addEventListener("click",()=>{var e;(e=window.umami)==null||e.track("start-teleprompter"),L(t.inputScript.value)});t.clearScriptBtn.addEventListener("click",()=>{var e;(e=window.umami)==null||e.track("clear-script"),t.inputScript.value="",t.inputScript.focus()});t.copyScriptBtn.addEventListener("click",async()=>{var i;const e=t.inputScript.value;if(e){(i=window.umami)==null||i.track("copy-script");try{await navigator.clipboard.writeText(e);const o=t.copyScriptBtn.textContent;t.copyScriptBtn.textContent="Copied!",setTimeout(()=>t.copyScriptBtn.textContent=o,1500)}catch(o){console.error("Failed to copy!",o)}}});t.pasteScriptBtn.addEventListener("click",async()=>{var e;(e=window.umami)==null||e.track("paste-script");try{const i=await navigator.clipboard.readText();t.inputScript.value=i,t.inputScript.focus()}catch(i){console.error("Failed to paste!",i)}});t.micButton.addEventListener("click",()=>{var e,i;n.isListening?((e=window.umami)==null||e.track("mic-stop"),w()):((i=window.umami)==null||i.track("mic-start"),R())});t.resetAppBtn.addEventListener("click",M);t.restartScriptBtn.addEventListener("click",C);t.toggleSettingsBtn.addEventListener("click",()=>{var e;(e=window.umami)==null||e.track("settings-toggle"),t.settingsPanel.classList.toggle("hidden")});t.closeSettingsBtn.addEventListener("click",()=>{t.settingsPanel.classList.add("hidden")});t.fontSizeInput.addEventListener("input",e=>{const i=parseInt(e.target.value);n.config.fontSize=i,t.fontSizeVal.textContent=`${i}px`,t.scriptContent.style.fontSize=`${i}px`});t.lineHeightInput.addEventListener("input",e=>{const i=parseFloat(e.target.value);n.config.lineHeight=i,t.lineHeightVal.textContent=`${i}x`,t.scriptContent.style.lineHeight=`${i}`});t.paragraphSpacingInput.addEventListener("input",e=>{const i=parseFloat(e.target.value);n.config.paragraphSpacing=i,t.paragraphSpacingVal.textContent=`${i}em`,m()});t.marginInput.addEventListener("input",e=>{const i=parseInt(e.target.value);n.config.margin=i,t.marginVal.textContent=`${i}px`,t.scriptContent.style.paddingLeft=`${i}px`,t.scriptContent.style.paddingRight=`${n.config.margin}px`});t.activeLinePositionInput.addEventListener("input",e=>{const i=parseInt(e.target.value);n.config.activeLinePosition=i,t.activeLinePositionVal.textContent=`${i}%`,v()});t.textColorInput.addEventListener("input",e=>{n.config.textColor=e.target.value,m()});t.bgColorInput.addEventListener("input",e=>{n.config.bgColor=e.target.value,m()});["left","center","right"].forEach(e=>{t.alignBtns[e].addEventListener("click",()=>{n.config.textAlign=e,t.scriptContent.style.textAlign=e,k()})});t.themeDarkBtn.addEventListener("click",()=>{n.config.bgColor="#000000",n.config.textColor="#ffffff",t.bgColorInput.value="#000000",t.textColorInput.value="#ffffff",m()});t.themeLightBtn.addEventListener("click",()=>{n.config.bgColor="#ffffff",n.config.textColor="#000000",t.bgColorInput.value="#ffffff",t.textColorInput.value="#000000",m()});t.mirrorToggle.addEventListener("change",e=>{n.isMirrored=e.target.checked,n.isMirrored?t.scrollContainer.classList.add("mirror-mode"):t.scrollContainer.classList.remove("mirror-mode")});t.stopSignToggle.addEventListener("change",e=>{n.config.showStopIcon=e.target.checked,n.config.showStopIcon?t.scriptContent.classList.add("show-stops"):t.scriptContent.classList.remove("show-stops")});t.languageSelect.addEventListener("change",e=>{var o;const i=e.target.value;(o=window.umami)==null||o.track("language-select",{language:i}),n.selectedLanguage=i,n.recognition&&(n.recognition.lang=i)});t.preserveFormattingToggle.addEventListener("change",e=>{n.config.preserveFormatting=e.target.checked;const i=t.inputScript.value.trim();if(i){const o=n.currentIndex;L(i),o<n.scriptWords.length&&(n.currentIndex=o,h(),v())}});t.voiceCommandToggle.addEventListener("change",e=>{n.config.voiceCommandsEnabled=e.target.checked});t.screenRotationToggle.addEventListener("change",e=>{n.isScreenRotated=e.target.checked,n.isScreenRotated?document.body.classList.add("screen-rotated"):document.body.classList.remove("screen-rotated")});t.smoothAnimationsToggle.addEventListener("change",e=>{n.config.smoothAnimations=e.target.checked,m()});t.clearHistoryBtn.addEventListener("click",O);t.dismissWarningBtn.addEventListener("click",()=>{t.browserWarning.classList.add("hidden")});function U(){t.fontSizeVal.textContent=`${n.config.fontSize}px`,t.fontSizeInput.value=n.config.fontSize.toString(),t.lineHeightVal.textContent=`${n.config.lineHeight}x`,t.lineHeightInput.value=n.config.lineHeight.toString(),t.paragraphSpacingVal.textContent=`${n.config.paragraphSpacing}em`,t.paragraphSpacingInput.value=n.config.paragraphSpacing.toString(),t.marginVal.textContent=`${n.config.margin}px`,t.marginInput.value=n.config.margin.toString(),t.activeLinePositionVal.textContent=`${n.config.activeLinePosition}%`,t.activeLinePositionInput.value=n.config.activeLinePosition.toString(),k(),t.smoothAnimationsToggle.checked=n.config.smoothAnimations,B(I(),L),m()}function k(){["left","center","right"].forEach(e=>{const i=t.alignBtns[e],o=e===n.config.textAlign;i.classList.toggle("bg-neutral-500",o),i.classList.toggle("text-white",o),i.classList.toggle("hover:bg-neutral-600",!o)})}U();
