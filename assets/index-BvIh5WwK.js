(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=s(o);fetch(o.href,c)}})();const H="modulepreload",T=function(e){return"/Teleprompter/"+e},E={},P=function(n,s,a){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(s.map(u=>{if(u=T(u),u in E)return;E[u]=!0;const g=u.endsWith(".css"),f=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=g?"stylesheet":H,g||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),g)return new Promise((d,W)=>{p.addEventListener("load",d),p.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${u}`)))})}))}function c(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&c(l.reason);return n().catch(c)})};function A(e={}){const{immediate:n=!1,onNeedRefresh:s,onOfflineReady:a,onRegistered:o,onRegisteredSW:c,onRegisterError:i}=e;let l,u;const g=async(p=!0)=>{await u};async function f(){if("serviceWorker"in navigator){const{Workbox:p}=await P(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:d}},[]);l=new p("/Teleprompter/sw.js",{scope:"/Teleprompter/",type:"classic"}),l.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),l.addEventListener("installed",d=>{d.isUpdate||a==null||a()}),l.register({immediate:n}).then(d=>{c?c("/Teleprompter/sw.js",d):o==null||o(d)}).catch(d=>{i==null||i(d)})}}return u=f(),g}A({immediate:!0});const t={isListening:!1,scriptWords:[],currentIndex:0,recognition:null,isMirrored:!1,config:{fontSize:20,lineHeight:1.5,textColor:"#ffffff",bgColor:"#000000",textAlign:"center",showStopIcon:!1}},r={setupScreen:document.getElementById("setupScreen"),prompterContainer:document.getElementById("prompterContainer"),inputScript:document.getElementById("inputScript"),scriptContent:document.getElementById("scriptContent"),scrollContainer:document.getElementById("scrollContainer"),topSpacer:document.getElementById("topSpacer"),settingsPanel:document.getElementById("settingsPanel"),fontSizeInput:document.getElementById("fontSizeInput"),fontSizeVal:document.getElementById("fontSizeVal"),lineHeightInput:document.getElementById("lineHeightInput"),lineHeightVal:document.getElementById("lineHeightVal"),textColorInput:document.getElementById("textColorInput"),bgColorInput:document.getElementById("bgColorInput"),appBody:document.getElementById("appBody"),micButton:document.getElementById("micButton"),micIcon:document.getElementById("micIcon"),statusIndicator:document.getElementById("statusIndicator"),mirrorBtn:document.getElementById("mirrorBtn"),mirrorToggleKnob:document.getElementById("mirrorToggleKnob"),browserWarning:document.getElementById("browserWarning"),historyList:document.getElementById("historyList"),historySection:document.getElementById("historySection"),stopSignToggle:document.getElementById("stopSignToggle"),alignBtns:{left:document.getElementById("alignLeftBtn"),center:document.getElementById("alignCenterBtn"),right:document.getElementById("alignRightBtn")},loadScriptBtn:document.getElementById("loadScriptBtn"),clearHistoryBtn:document.getElementById("clearHistoryBtn"),resetAppBtn:document.getElementById("resetAppBtn"),restartScriptBtn:document.getElementById("restartScriptBtn"),toggleSettingsBtn:document.getElementById("toggleSettingsBtn"),themeDarkBtn:document.getElementById("themeDarkBtn"),themeLightBtn:document.getElementById("themeLightBtn")},S=window.SpeechRecognition||window.webkitSpeechRecognition;S?(t.recognition=new S,t.recognition.continuous=!0,t.recognition.interimResults=!0,t.recognition.lang="en-US"):r.browserWarning.classList.remove("hidden");v();V();function C(e=null){let n=e||r.inputScript.value.trim();if(!n)return alert("Please enter some text.");e||_(n),n=n.replace(/\n+/g," ||LB|| ");const s=n.split(/\s+/);let a=!1;t.scriptWords=s.map(o=>{if(o==="||LB||")return{word:"ðŸ›‘",clean:"",element:null,skip:!0,isStop:!0};o.startsWith("[")&&(a=!0);const c=o.toLowerCase().replace(/[^\w\s]|_/g,"").replace(/\s+/g," "),i=c.length===0,l=a||i||o.includes("ðŸ›‘");return o.endsWith("]")&&(a=!1),{word:o,clean:c,element:null,skip:l,isStop:!1}}),r.scriptContent.innerHTML="",t.scriptWords.forEach((o,c)=>{const i=document.createElement("span");i.textContent=o.word,i.id=`word-${c}`;let l="script-word transition-opacity duration-300 ";o.isStop?l+="stop-marker ":o.skip?l+="skipped-word ":l+="text-future hover:text-blue-400 ",i.className=l,i.onclick=()=>{o.skip||(t.currentIndex=c,m(),B())},r.scriptContent.appendChild(i),o.element=i}),t.config.showStopIcon?r.scriptContent.classList.add("show-stops"):r.scriptContent.classList.remove("show-stops"),r.setupScreen.classList.add("hidden"),r.prompterContainer.classList.remove("hidden"),t.currentIndex=0,L(),m()}function L(){for(;t.currentIndex<t.scriptWords.length&&t.scriptWords[t.currentIndex].skip;)t.currentIndex++}function O(){k(),r.prompterContainer.classList.add("hidden"),r.setupScreen.classList.remove("hidden"),v()}function b(){t.currentIndex=0,L(),m(),B(),r.scrollContainer.scrollTop=0}function _(e){let n=JSON.parse(localStorage.getItem("teleprompter_history")||"[]");if(n.length>0&&n[0].text===e)return;const s={id:Date.now(),text:e,preview:e.substring(0,40)+(e.length>40?"...":""),date:new Date().toLocaleDateString()};n.unshift(s),n.length>10&&n.pop(),localStorage.setItem("teleprompter_history",JSON.stringify(n))}function v(){let e=JSON.parse(localStorage.getItem("teleprompter_history")||"[]");if(r.historyList.innerHTML="",e.length===0){r.historyList.innerHTML=`
            <div class="text-center py-8 border border-dashed border-neutral-800 rounded-lg text-neutral-600 text-sm">
                No previous scripts found
            </div>
        `,r.clearHistoryBtn.classList.add("hidden");return}r.clearHistoryBtn.classList.remove("hidden"),e.forEach(n=>{const s=document.createElement("div");s.className="bg-neutral-800 p-3 rounded border border-neutral-700 hover:border-blue-500 cursor-pointer transition group flex justify-between items-center shadow-sm",s.onclick=()=>{r.inputScript.value=n.text,C(n.text)},s.innerHTML=`
            <div class="flex flex-col text-left overflow-hidden mr-2">
                <span class="text-gray-300 text-sm font-medium truncate font-mono">${n.preview}</span>
                <span class="text-gray-500 text-xs">${n.date}</span>
            </div>
            <div class="flex-shrink-0">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-500 opacity-0 group-hover:opacity-100 transition" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
            </div>
        `,r.historyList.appendChild(s)})}function z(){confirm("Clear all recent scripts?")&&(localStorage.removeItem("teleprompter_history"),v())}t.recognition&&(t.recognition.onresult=e=>{let n="";for(let o=e.resultIndex;o<e.results.length;o++)n+=e.results[o][0].transcript;const s=n.trim().toLowerCase().split(/\s+/);if(s.slice(-5).join(" ").includes("prompter restart")){b();return}M(s.slice(-5))},t.recognition.onend=()=>{if(t.isListening)try{t.recognition.start()}catch{}else I(!1)});function M(e){if(t.currentIndex>=t.scriptWords.length)return;const n=5;for(let s of e){const a=s.replace(/[^\w]|_/g,"");if(!a)continue;let o=t.currentIndex,c=0;for(;o<t.scriptWords.length&&c<n;){const i=t.scriptWords[o];if(i.skip){o++;continue}if(i.clean===a){t.currentIndex=o+1,L(),m(),B();return}o++,c++}}}function m(){t.scriptWords.forEach((e,n)=>{e.skip||e.isStop||e.element&&(n<t.currentIndex?(e.element.classList.remove("text-future","current-word","font-bold"),e.element.classList.add("text-past"),e.element.style.opacity=""):n===t.currentIndex?(e.element.classList.remove("text-future","text-past"),e.element.classList.add("current-word","font-bold"),e.element.style.opacity="1"):(e.element.classList.remove("text-past","current-word","font-bold"),e.element.classList.add("text-future"),e.element.style.opacity=""))})}function B(){if(t.currentIndex>0&&t.currentIndex<t.scriptWords.length){const e=t.scriptWords[t.currentIndex].element;e&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}function N(){if(!t.recognition)return alert("Speech recognition not supported.");t.isListening?k():$()}function $(){try{t.recognition.start(),t.isListening=!0,I(!0)}catch(e){console.error(e)}}function k(){t.isListening=!1,t.recognition.stop(),I(!1)}function I(e){const n=r.micButton,s=r.statusIndicator;e?(n.classList.add("bg-red-600","border-red-400","recording-pulse"),n.classList.remove("bg-neutral-800","border-neutral-600"),s.classList.remove("hidden")):(n.classList.remove("bg-red-600","border-red-400","recording-pulse"),n.classList.add("bg-neutral-800","border-neutral-600"),s.classList.add("hidden"))}function x(){const e=r.settingsPanel;e.classList.contains("hidden")?(e.classList.remove("hidden"),setTimeout(()=>{e.classList.remove("scale-95","opacity-0"),e.classList.add("scale-100","opacity-100")},10)):(e.classList.remove("scale-100","opacity-100"),e.classList.add("scale-95","opacity-0"),setTimeout(()=>{e.classList.add("hidden")},200))}function w(e){e==="dark"?(t.config.bgColor="#000000",t.config.textColor="#ffffff"):(t.config.bgColor="#ffffff",t.config.textColor="#000000"),r.bgColorInput.value=t.config.bgColor,r.textColorInput.value=t.config.textColor,y()}function h(e){t.config.textAlign=e,r.scriptContent.style.textAlign=e,["left","center","right"].forEach(n=>{const s=r.alignBtns[n];n===e?(s.classList.remove("hover:bg-neutral-600"),s.classList.add("bg-neutral-500","text-white")):(s.classList.add("hover:bg-neutral-600"),s.classList.remove("bg-neutral-500","text-white"))})}function y(){r.appBody.style.backgroundColor=t.config.bgColor,r.appBody.style.color=t.config.textColor}function D(){t.isMirrored=!t.isMirrored;const e=r.mirrorToggleKnob,n=r.mirrorBtn;t.isMirrored?(r.scriptContent.classList.add("mirror-mode"),e.classList.add("translate-x-6"),n.classList.add("bg-blue-600"),n.classList.remove("bg-neutral-600")):(r.scriptContent.classList.remove("mirror-mode"),e.classList.remove("translate-x-6"),n.classList.remove("bg-blue-600"),n.classList.add("bg-neutral-600"))}function V(){r.loadScriptBtn.addEventListener("click",()=>C()),r.clearHistoryBtn.addEventListener("click",z),r.resetAppBtn.addEventListener("click",O),r.restartScriptBtn.addEventListener("click",b),r.micButton.addEventListener("click",N),r.toggleSettingsBtn.addEventListener("click",x),r.themeDarkBtn.addEventListener("click",()=>w("dark")),r.themeLightBtn.addEventListener("click",()=>w("light")),r.alignBtns.left.addEventListener("click",()=>h("left")),r.alignBtns.center.addEventListener("click",()=>h("center")),r.alignBtns.right.addEventListener("click",()=>h("right")),r.stopSignToggle.addEventListener("change",e=>{t.config.showStopIcon=e.target.checked,t.config.showStopIcon?r.scriptContent.classList.add("show-stops"):r.scriptContent.classList.remove("show-stops")}),r.fontSizeInput.addEventListener("input",e=>{const n=e.target.value;t.config.fontSize=parseInt(n),r.fontSizeVal.textContent=`${n}px`,r.scriptContent.style.fontSize=`${n}px`}),r.lineHeightInput.addEventListener("input",e=>{const n=e.target.value;t.config.lineHeight=parseFloat(n),r.lineHeightVal.textContent=`${n}x`,r.scriptContent.style.lineHeight=n}),r.textColorInput.addEventListener("input",e=>{t.config.textColor=e.target.value,y()}),r.bgColorInput.addEventListener("input",e=>{t.config.bgColor=e.target.value,y()}),r.mirrorBtn.addEventListener("click",D),document.addEventListener("click",e=>{const n=r.settingsPanel,s=r.toggleSettingsBtn;!n.classList.contains("hidden")&&!n.contains(e.target)&&!s.contains(e.target)&&x()})}
